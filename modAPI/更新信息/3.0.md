# 3.0

2024.08.15：版本号（V3.0 BE1.20.11）

包括Mod PC包，手机测试版启动器，和服务器引擎。

示例Demo：<a href="../../../mcguide/20-玩法开发/13-模组SDK编程/60-Demo示例.html" rel="noopenner">前往此处下载</a>





## 一、更新时间表

1. 在2024年8月15日上线3.0第一个Beta版。
2. 在2024年8月29日上线3.0第二个Beta版。
3. 在2024年9月12日上线3.0稳定版。
4. 在2024年9月20日，全渠道将更新3.0版本玩家包体，玩家将陆续更新到3.0版本，请开发者合理安排更新节奏。



## 二、重要功能更新

1. 支持获取实体的NBT标签，现在可以直接访问游戏中实体的NBT字典，并直接生成带有NBT标签的实体。详见[GetEntityNBTTags](../接口/实体/实体类型.md#getentitynbttags)和[CreateEngineEntityByNBT](../接口/世界/实体管理.md#createengineentitybynbt)接口。示例Demo与内容库也新增了对应的Demo：自定义精灵蛋。

   ![v30_nbt](../picture/v30_nbt.gif)

1. 现在可以动态设置一个坐标或一片方块区域的群系，可用于改变群系效果，生物刷新规则等，详见[SetBiomeByPos](../接口/世界/地图.md#setbiomebypos)、[SetBiomeByPosList](../接口/世界/地图.md#setbiomebyposlist)、[SetBiomeByVolume](../接口/世界/地图.md#setbiomebyvolume)等接口。

   ![V30_setbiome](../picture/V30_setbiome.gif)

1. 使用[GetBonePositionFromMinecraftObject](../接口/模型.md#getbonepositionfromminecraftobject)接口，您可以直接获取原版模型的骨骼世界坐标。有效增强物理交互与表现，进一步提高开发上限。

1. 利用[SetBiomeInfo](../接口/世界/地图.md#setbiomeinfo)与[GetBiomeInfo](../接口/世界/地图.md#getbiomeinfo)，现在可以动态改变群系的气候，决定是否降雪或者降雨。

1. 自定义物品新增<a href="../../../mcguide/20-玩法开发/15-自定义游戏内容/1-自定义物品/1-自定义基础物品.html#netease-compostable" rel="noopenner"> 堆肥组件 </a>。

1. 自定义方块<a href="../../../mcguide/20-玩法开发/15-自定义游戏内容/2-自定义方块/1-JSON组件.html#netease-tier" rel="noopenner"> 挖掘组件 </a>新增锄速度加成属性。



## 三、API更新

- 新增

1. 新增[IsTouchWithMouse](../接口/控制.md#istouchwithmouse)(客户端)， 获取是否正在使用鼠标点击模拟触屏<!--by bl-->

1. 新增[CreateEngineEntityByNBT](../接口/世界/实体管理.md#createengineentitybynbt)(服务端)， 根据nbt数据创建实体<!--by qyk-->

1. 新增[SetBiomeInfo](../接口/世界/地图.md#setbiomeinfo)(服务端)， 设置群系天气相关参数,受引擎限制,目前snowAccumulation参数没有效果,downfall目前只影响湿度<!--by qyk-->

1. 新增[GetBiomeInfo](../接口/世界/地图.md#getbiomeinfo)(服务端)， 获取群系天气相关参数<!--by qyk-->

1. 新增[SetBiomeByPos](../接口/世界/地图.md#setbiomebypos)(服务端)， 增加设置生物群系接口<!--by bailei-->

1. 新增[SetBiomeByPosList](../接口/世界/地图.md#setbiomebyposlist)(服务端)， 增加设置生物群系接口<!--by bailei-->

1. 新增[SetBiomeByVolume](../接口/世界/地图.md#setbiomebyvolume)(服务端)， 增加设置生物群系接口<!--by bailei-->

1. 新增[GetEntityNBTTags](../接口/实体/实体类型.md#getentitynbttags)(服务端)， 获取实体的NBT标签<!--by qyk-->

1. 新增[PlayCustomUIMusic](../接口/音效.md#playcustomuimusic)(客户端)， 播放UI音效，包括原版音效及自定义音效<!--by qyk-->

1. 新增[SetBlockRenderDistance](../接口/方块/渲染.md#setblockrenderdistance)(客户端)， 设置玩家周围区块的可渲染距离，无法超过视频设置中的能见度限制<!--by xgb-->

1. 新增[GetBlockRenderDistance](../接口/方块/渲染.md#getblockrenderdistance)(客户端)， 获取玩家周围的可渲染距离<!--by xgb-->

1. 新增[GetBonePositionFromMinecraftObject](../接口/模型.md#getbonepositionfromminecraftobject)(客户端)， 获取原版模型的骨骼世界坐标<!--by qyk-->

- 调整

1. 调整[SetAttrValue](../接口/实体/属性.md#setattrvalue)(服务端)， 新增对AttrType.ARMOR的支持<!--by qyk-->

1. 调整[AddBlockItemListenForUseEvent](../事件/方块.md#addblockitemlistenforuseevent)(服务端)， auxvalue默认值从0改为*<!--by xgb-->

1. 调整[RemoveBlockItemListenForUseEvent](../事件/方块.md#removeblockitemlistenforuseevent)(服务端)， auxvalue默认值从0改为*<!--by xgb-->

1. 调整[SetMobStrengthMax](../接口/实体/属性.md#setmobstrengthmax)(服务端)， 增加的接口特殊情况说明：由于引擎限制，在羊驼被打时候会reload组件，strengthMax会恢复成llama.json中的配置值(minecraft:strength)<!--by bl-->

1. 调整[LocateStructureFeature](../接口/世界/地图.md#locatestructurefeature)(服务端)， 支持只在未生成的区块中查找<!--by bailei-->

1. 调整[LocateNeteaseFeatureRule](../接口/世界/地图.md#locateneteasefeaturerule)(服务端)， 支持获取未生成区块的地物结构<!--by bailei-->

1. 调整[SetPlayerGameType](../接口/玩家/游戏模式.md#setplayergametype)(服务端)， 新增对旁观模式的支持<!--by qyk-->

1. 调整[ChangeArmorTextures](../接口/物品.md#changearmortextures)(客户端)， 修复uiIconTexture不支持None和""的问题<!--by qyk-->

1. 调整[SetEntityRenderDistance](../接口/实体/渲染.md#setentityrenderdistance)(客户端)， 实现调整为不影响方块的渲染距离<!--by xgb-->

1. 调整[AddBlockItemListenForUseEvent](../事件/方块.md#addblockitemlistenforuseevent)(客户端)， auxvalue默认值从0改为*<!--by xgb-->

1. 调整[RemoveBlockItemListenForUseEvent](../事件/方块.md#removeblockitemlistenforuseevent)(客户端)， auxvalue默认值从0改为*<!--by xgb-->

1. 调整[SetCameraAnchor](../接口/玩家/摄像机.md#setcameraanchor)(客户端)， 修复交互中心第一人称下没有跟随偏移的BUG<!--by qyk-->

1. 调整[BindModelToEntity](../接口/模型.md#bindmodeltoentity)(客户端)， 新增scale参数控制挂接的模型缩放<!--by qyk-->

1. 调整[PlayerAttackEntityEvent](../事件/玩家.md#playerattackentityevent)(服务端)， 新增isCrit参数,用于判断本次攻击是否产生暴击<!--by qyk-->

1. 调整[DestroyBlockEvent](../事件/方块.md#destroyblockevent)(服务端)， 新增掉落物实体id列表<!--by bailei-->

1. 调整[PlayerFeedEntityServerEvent](../事件/玩家.md#playerfeedentityserverevent)(服务端)， 调整备注，新增使用时注意事项<!--by lidi-->

1. 调整[EntityDieLoottableServerEvent](../事件/实体.md#entitydieloottableserverevent)(服务端)， 支持修改itemDict中的userData,userData必须为NBT数据格式,格式可参考<a href="../../../mcguide/20-玩法开发/10-基本概念/1-我的世界基础概念.html#NBT数据格式#NBT数据格式">NBT数据格式</a><!--by qyk-->

- 修复

1. 修复[SetMobStrength](../接口/实体/属性.md#setmobstrength)(服务端)， 修复当羊驼被打时候，强度值恢复。修复强度值没有存档。<!--by bl-->

